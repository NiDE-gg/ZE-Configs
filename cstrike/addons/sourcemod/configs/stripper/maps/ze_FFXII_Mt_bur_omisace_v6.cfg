;  __  __  ____  _____ _____ ________     __
; |  \/  |/ __ \|  __ \_   _|  ____\ \   / /
; | \  / | |  | | |  | || | | |__   \ \_/ /
; | |\/| | |  | | |  | || | |  __|   \   /
; | |  | | |__| | |__| || |_| |       | |
; |_|  |_|\____/|_____/_____|_|       |_|
;		Stripper by Małgo 18.07.2024
;STRIPPER CFG BY MAŁGO https://steamcommunity.com/profiles/76561197992553990/
;---------------------------------------------------------------
;---------------------------------------
;Fix temple teleport exploit (thanks koen, fuck you pegi)
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "omisace_temple_teleport_001"
		"classname" "trigger_teleport"
	}
	replace:
	{
		"origin" "-5107.5 2569.01 1193.26"
	}
}

;---------------------------------------
;Fix disable trigger fall & trigger hurt
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "omisace_fall_hurt"
		"classname" "trigger_hurt"
	}
	replace:
	{
		"StartDisabled" "0"
	}
}
modify:
{
	match:
	{
		"targetname" "omisace_fall_teleport"
		"classname" "trigger_teleport"
	}
	replace:
	{
		"StartDisabled" "0"
	}
}

;---------------------------------------
;Back to test4 ending stage 3 boss hp
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "Ending_boss1_laser_add"
		"classname" "trigger_hurt"
	}
	delete:
	{
		"OnStartTouch" "Ending_boss1_laser_counter,Add,50,0,-1"
	}
	insert:
	{
		"OnStartTouch" "Ending_boss1_laser_counter,Add,43,0,-1"
	}
}

;---------------------------------------
;Balance Bergan Phase 1 Attacks
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "Bergan_boss1_attack_side_ice_hurt"
		"classname" "trigger_hurt"
	}
	replace:
	{
		"damage" "10"
	}
}
modify:
{
	match:
	{
		"targetname" "Bergan_boss1_attack_limitbreaker_part"
		"classname" "info_particle_system"
	}
	delete:
	{
		"OnUser1" "Bergan_boss1_attack_side_ice_hurt,SetDamage,60,0,-1"
	}
	insert:
	{
		"OnUser1" "Bergan_boss1_attack_side_ice_hurt,SetDamage,20,0,-1"
	}
}

;---------------------------------------
;Balance Bergan Phase 1 & Phase 2 HP
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "Bergan_boss1_HP_Multi"
		"classname" "trigger_multiple"
	}
	delete:
	{
		"OnStartTouch" "Bergan_boss1_attack_HP1,Add,125,0,-1"
	}
	insert:
	{
		"OnStartTouch" "Bergan_boss1_attack_HP1,Add,116,0,-1"
	}
}
modify:
{
	match:
	{
		"targetname" "Bergan_boss2_HP_Multi"
		"classname" "trigger_multiple"
	}
	delete:
	{
		"OnStartTouch" "Bergan_boss2_attack_HP1,Add,165,0,-1"
	}
	insert:
	{
		"OnStartTouch" "Bergan_boss2_attack_HP1,Add,143,0,-1"
	}
}

;---------------------------------------
;Balance Bergan Phase 2 Venat HP
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "Venat_mini_boss_multi"
		"classname" "trigger_multiple"
	}
	delete:
	{
		"OnStartTouch" "Venat_mini_boss_HP,Add,101,0,-1"
	}
	insert:
	{
		"OnStartTouch" "Venat_mini_boss_HP,Add,90,0,-1"
	}
}

;---------------------------------------
;Reduced the number of shit attacks on stage 2
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "sanctuary_keeper_boss_Attack_Case"
		"classname" "logic_case"
	}
	delete:
	{
		"OnCase07" "sanctuary_keeper_boss_attack_Personal_ICE,Enable,,0.05,-1"
		"OnCase07" "sanctuary_keeper_boss_attack_Personal_ICE,Enable,,2,-1"
		"OnCase07" "cmd,Command,say **Sanctuary Keeper has casted Flare of Freezing!**,0,-1"
		"OnCase07" "cinematic_text,Display,,0.05,-1"
		"OnCase07" "cinematic_text,AddOutput,message Flare of Freezing,0,-1"
		"OnCase07" "cinematic_text,AddOutput,color 144 243 255,0,-1"
		"OnCase13" "cinematic_text,Display,,0.05,-1"
		"OnCase13" "cinematic_text,AddOutput,color 224 141 251,0,-1"
		"OnCase13" "cinematic_text,AddOutput,message Annihilate,0,-1"	
		"OnCase14" "sanctuary_keeper_boss_attack_wind_part,FireUser1,,1.25,-1"
		"OnCase14" "cmd,Command,say **Sanctuary Keeper has casted Wind Rage!**,0,-1"
		"OnCase14" "cinematic_text,Display,,0.05,-1"
		"OnCase14" "cinematic_text,AddOutput,message Wind Rage,0,-1"
		"OnCase14" "cinematic_text,AddOutput,color 200 176 176,0,-1"
	}
	insert:
	{
		"OnCase07" "sanctuary_keeper_boss_attack_Personal_ICE,Enable,,0.05,1"
		"OnCase07" "sanctuary_keeper_boss_attack_Personal_ICE,Enable,,2,1"
		"OnCase07" "cmd,Command,say **Sanctuary Keeper has casted Flare of Freezing!**,0,1"
		"OnCase07" "cinematic_text,Display,,0.05,1"
		"OnCase07" "cinematic_text,AddOutput,message Flare of Freezing,0,1"
		"OnCase07" "cinematic_text,AddOutput,color 144 243 255,0,1"
		"OnCase13" "cinematic_text,Display,,0.05,2"
		"OnCase13" "cinematic_text,AddOutput,color 224 141 251,0,2"
		"OnCase13" "cinematic_text,AddOutput,message Annihilate,0,2"
		"OnCase14" "sanctuary_keeper_boss_attack_wind_part,FireUser1,,1.25,2"
		"OnCase14" "cmd,Command,say **Sanctuary Keeper has casted Wind Rage!**,0,2"
		"OnCase14" "cinematic_text,Display,,0.05,2"
		"OnCase14" "cinematic_text,AddOutput,message Wind Rage,0,2"
		"OnCase14" "cinematic_text,AddOutput,color 200 176 176,0,2"
	}
}

;---------------------------------------
;Sanctuary Keeper boost close hurt
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "sanctuary_keeper_boss_Attack_Too_Close_Hurt"
		"classname" "trigger_hurt"
	}
	replace:
	{
		"damage" "45"
	}
}
modify:
{
	match:
	{
		"targetname" "sanctuary_keeper_boss_attack_close_hurt"
		"classname" "trigger_hurt"
	}
	replace:
	{
		"damage" "37"
	}
}

;---------------------------------------
;Faster win trigger on stage 1
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "lvl1_crystal_ending_model"
		"classname" "func_breakable"
	}
	delete:
	{
		"OnBreak" "cmd,Command,say **[Bash] The crystal has been destroyed! It takes 25 seconds to fully activate!**,0,-1"
		"OnBreak" "lvl1_WinTriggerCt,Enable,,25,-1"
		"OnBreak" "cmd,Command,say **[Bash] Get to the fountain! Fast!**,20,-1"
	}
	insert:
	{
		"OnBreak" "cmd,Command,say **[Bash] The crystal has been destroyed! It takes 20 seconds to fully activate!**,0,-1"
		"OnBreak" "lvl1_WinTriggerCt,Enable,,20,-1"
	}
}

;---------------------------------------
;Fix Missing Bergan Phase 1 thunder particle
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "lighting_part"
		"classname" "info_particle_system"
	}
	replace:
	{
		"effect_name" "custom_particle_037"
	}
}

;---------------------------------------
;Balance Gabranth Boss HP 
;---------------------------------------
modify:
{
	match:
	{
		"targetname" "Gabranth_boss2_attack_multi"
		"classname" "trigger_multiple"
	}
	delete:
	{
		"OnStartTouch" "Gabranth_boss2_attack_HP1,Add,205,0,-1"
	}
	insert:
	{
		"OnStartTouch" "Gabranth_boss2_attack_HP1,Add,190,0,-1"
	}
}

modify:
{
	match:
	{
		"classname" "logic_auto"
		"hammerid" "102957"
	}
	delete:
	{
		"OnNewGame" "cmd,Command,say **Map Status: No Stripper!**,0,1"
	}
	insert:
	{
		"OnNewGame" "cmd,Command,say **Map Status: Stripper #0.2 Enable!**,0,-1"
	}
}