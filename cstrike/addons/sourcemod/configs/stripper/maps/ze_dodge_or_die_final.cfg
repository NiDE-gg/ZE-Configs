
; ----------------------------------------------------
; Fix invisible that can affect other players hugging
; ----------------------------------------------------


; Invisible Item 1
modify:
{
	match:
	{
		"targetname" "zinv_branch1"
		"classname" "logic_relay"
	}
	delete:
	{
		"OnTrigger" "zinv_item1,Disable,,1,-1"
		"OnTrigger" "zinv_item1,Enable,,0,-1"
	}
	insert:
	{
		"OnTrigger" "!activator,AddOutput,rendermode 1,8,-1"
		"OnTrigger" "!activator,AddOutput,rendermode 6,0,-1"
	}
}
filter:
{
	"targetname" "zinv_item1"
	"classname" "trigger_multiple"
	"hammerid" "1258839"
}

; Invisible Item 2
modify:
{
	match:
	{
		"targetname" "zinv_branch2"
		"classname" "logic_relay"
	}
	delete:
	{
		"OnTrigger" "zinv_item2,Disable,,1,-1"
		"OnTrigger" "zinv_item2,Enable,,0,-1"
	}
	insert:
	{
		"OnTrigger" "!activator,AddOutput,rendermode 1,8,-1"
		"OnTrigger" "!activator,AddOutput,rendermode 6,0,-1"
	}
}
filter:
{
	"targetname" "zinv_item2"
	"classname" "trigger_multiple"
	"hammerid" "1258846"
}


; ----------------
; Other Map fixes
; ----------------

modify:
{
	match:
	{
		"targetname" "Noctali_Boss_Hp_To_Boss"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnStartTouch" "break_boss,AddHealth,500,0.4,-1"
	}
	insert:
	{
		"OnStartTouch" "break_boss,AddHealth,350,0.4,-1"
	}
}

filter:
{
	"origin" "-3266 -1284 -2260"
	"targetname" "maker_infect"
	"classname" "env_entity_maker"
	"hammerid" "1257724"
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_1"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "0.9"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_6"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "0.9"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_7"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "0.9"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_8"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "0.9"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_14"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "0.9"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_9"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "0.9"
	}
}
modify:
{
	match:
	{
		"targetname" "zinv_eff2"
		"classname" "info_particle_system"
	}
	replace:
	{
		"origin" "5023 6435 932.47"
	}
}
modify:
{
	match:
	{
		"targetname" "zinv_eff1"
		"classname" "info_particle_system"
	}
	replace:
	{
		"origin" "4984 6486 936.98"
	}
}
modify:
{
	match:
	{
		"targetname" "knife_laser_stage_11"
		"classname" "weapon_knife"
	}
	delete:
	{
		"OnPlayerPickup" "timer_detect,Enable,,1.5,-1"
		"OnPlayerPickup" "tp_dest_final_zm_boss,Teleport,,1,1"
		"OnPlayerPickup" "!activator,AddOutput,targetname player_boss,0,1"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori4_princ1"
		"classname" "func_movelinear"
	}
	replace:
	{
		"movedir" "0 180 0"
		"speed" "600"
	}
}
modify:
{
	match:
	{
		"targetname" "laser_mid9"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1900"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_final1"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_special1"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori4_door1"
		"classname" "func_door"
	}
	replace:
	{
		"lip" "-75
		"speed" "450"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori4_door"
		"classname" "func_door"
	}
	replace:
	{
		"lip" "-75
		"speed" "450"
	}
}
modify:
{
	match:
	{
		"targetname" "knife_laser_stage_11"
		"classname" "weapon_knife"
	}
	delete:
	{
		"OnPlayerPickup" "timer_lasers_stage_9,Enable,,5,-1"		
	}
	insert:
	{
		"OnPlayerPickup" "timer_lasers_stage_9,Enable,,2,-1"	
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_12"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "2.2"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_3"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "2.2"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_2"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "2.5"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_11"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "2.5"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori4_princ"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "400"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_10"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_special"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_8"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_special"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_7"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_special"
	}
}
modify:
{
	match:
	{
		"targetname" "item_ice_relay_spawn"
		"classname" "logic_relay"
	}
	insert:
	{
		"OnTrigger" "laser_teleport_hurt*,Kill,,0,-1"
		"OnTrigger" "laser_teleport*,Kill,,0,-1"
	}
}
modify:
{
	match:
	{
		"targetname" "Item_Ammo_Filter"
		"classname" "filter_activator_name"
	}
	insert:
	{
		"OnPass" "laser_slow*,Kill,,0,-1"
		"OnPass" "laser_slow_hurt*,Kill,,0,-1"
	}
}
modify:
{
	match:
	{
		"targetname" "zinv_branch2"
		"classname" "logic_relay"
	}
	insert:
	{
		"OnTrigger" "laser_mid*,Kill,,0,-1"
		"OnTrigger" "laser_mid_hurt*,Kill,,0,-1"
		"OnTrigger" "l_t_f_hori*,Kill,,0,-1"
		"OnTrigger" "l_t_f_h_hori*,Kill,,0,-1"
	}
}
modify:
{
	match:
	{
		"targetname" "zinv_branch1"
		"classname" "logic_relay"
	}
	insert:
	{
		"OnTrigger" "laser_mid*,Kill,,0,-1"
		"OnTrigger" "laser_mid_hurt*,Kill,,0,-1"
		"OnTrigger" "l_t_f_hori*,Kill,,0,-1"
		"OnTrigger" "l_t_f_h_hori*,Kill,,0,-1"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori4_door1"
		"classname" "func_door"
	}
	delete:
	{
		"OnFullyClosed" "!self,Open,,0,-1"
		"OnFullyOpen" "!self,Close,,0,-1"
	}
	insert:
	{
		"OnFullyClosed" "!self,Open,,1,-1"
		"OnFullyOpen" "!self,Close,,1,-1"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori4_door"
		"classname" "func_door"
	}
	delete:
	{
		"OnFullyClosed" "!self,Open,,0,-1"
		"OnFullyOpen" "!self,Close,,0,-1"
	}
	insert:
	{
		"OnFullyClosed" "!self,Open,,1,-1"
		"OnFullyOpen" "!self,Close,,1,-1"
	}
}
add:
{
"model" "*97"
"targetname" "break_boss"
"spawnobject" "0"
"spawnflags" "0"
"rendermode" "0"
"renderfx" "0"
"rendercolor" "255 255 255"
"renderamt" "255"
"propdata" "0"
"pressuredelay" "0"
"physdamagescale" "1.0"
"PerformanceMode" "0"
"origin" "9248 3456 208"
"nodamageforces" "0"
"minhealthdmg" "0"
"material" "2"
"health" "100"
"gibdir" "0 0 0"
"explosion" "0"
"ExplodeRadius" "0"
"explodemagnitude" "0"
"ExplodeDamage" "0"
"disableshadows" "0"
"disablereceiveshadows" "0"
"damagefilter" "Filter_Nada"
"classname" "func_breakable"
"OnBreak" "hurt_boss,Enable,,0,-1"
"OnBreak" "explode_boss,Start,,0,-1"
"OnBreak" "explode_boss,Kill,,5,-1"
"OnBreak" "case_explode,PickRandom,,0,-1"
"OnBreak" "relay_final_normal,Trigger,,0,-1"
"OnBreak" "relay_final_carnage,Trigger,,0,-1"
"OnBreak" "relay_final_impossible,Trigger,,0,-1"
}
add:
{
"model" "*97"
"targetname" "break_boss"
"spawnobject" "0"
"spawnflags" "0"
"rendermode" "0"
"renderfx" "0"
"rendercolor" "255 255 255"
"renderamt" "255"
"propdata" "0"
"pressuredelay" "0"
"physdamagescale" "1.0"
"PerformanceMode" "0"
"origin" "9248 2496 208"
"nodamageforces" "0"
"minhealthdmg" "0"
"material" "2"
"health" "100"
"gibdir" "0 0 0"
"explosion" "0"
"ExplodeRadius" "0"
"explodemagnitude" "0"
"ExplodeDamage" "0"
"disableshadows" "0"
"disablereceiveshadows" "0"
"damagefilter" "Filter_Nada"
"classname" "func_breakable"
"OnBreak" "hurt_boss,Enable,,0,-1"
"OnBreak" "explode_boss,Start,,0,-1"
"OnBreak" "explode_boss,Kill,,5,-1"
"OnBreak" "case_explode,PickRandom,,0,-1"
"OnBreak" "relay_final_normal,Trigger,,0,-1"
"OnBreak" "relay_final_carnage,Trigger,,0,-1"
"OnBreak" "relay_final_impossible,Trigger,,0,-1"
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori3"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori7"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "laser_mid6"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "laser_mid"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori6"
		"classname" "func_door"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "l_t_f_hori8"
		"classname" "func_door"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "laser_mid7"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "laser_mid8"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "laser_mid1"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "laser_mid2"
		"classname" "func_movelinear"
	}
	replace:
	{
		"speed" "1050"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_3"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_1"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_4"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_1"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_6"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_6"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_5"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_special"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_10"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_1"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_9"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_6"
	}
}
modify:
{
	match:
	{
		"targetname" "maker_laser_stage_impossible_8"
		"classname" "env_entity_maker"
	}
	replace:
	{
		"EntityTemplate" "temp_laser_stage_impossible_normal"
	}
}
modify:
{
	match:
	{
		"targetname" "timer_lasers_stage_10"
		"classname" "logic_timer"
	}
	replace:
	{
		"RefireTime" "2.5"
	}
}
