;--------------------------------
;------------------------------------------------
; STRIPPER BY HOBBITTEN
; - CONTACT ME IF SOMETHING IS WRONG WITH MAP
; - LAST EDITED - 16-01-2025
;------------------------------------------------
;--------------------------------

;------------------------------------------
; LOGIC AUTO SETTINGS
;------------------------------------------
modify:
{
	match:
	{
		"origin" "8512 608 11937"
		"classname" "logic_auto"
	}
	insert:
	{
		"OnMapSpawn" "servercommandCommandsay <> STRIPPER LOADED <>14-1"
	}
}

;------------------------------------------
; Replaces vscript paths to match server
;------------------------------------------


;------------------------------------------
; ITEM FIXES
;------------------------------------------

; Untemplated special sound effects for humans for when they spawn
modify:
{
	match:
	{
		"origin" "8470.5 -800 12016"
		"targetname" "kruber_template"
		"classname" "point_template"
	}
	insert:
	{
		"Template16" "kruber_alert_*"
	}
}
modify:
{
	match:
	{
		"origin" "8726 -800 12016"
		"targetname" "bardin_template"
		"classname" "point_template"
	}
	insert:
	{
		"Template16" "bardin_alert_*"
	}
}

; Adds a knife respawner incase humans go into the zombie item location and no exist at given timeframe
modify:
{
	match:
	{
		"origin" "7936 4544 14000"
		"classname" "trigger_teleport"
	}
	replace:
	{
		"origin" "7936 4544 13808"
	}
}
add:
{
	"origin" "9496 -800 12016"
	"targetname" "knife_repicker"
	"spawnflags" "1"
	"angles" "0 0 0"
	"classname" "weapon_knife"
	"hammerid" "999999999"
}
add:
{
	"origin" "9502 -800 12016"
	"Template01" "knife_repicker"
	"targetname" "anti_no_knife_template"
	"spawnflags" "0"
	"classname" "point_template"
}
add:
{
	"origin" "7936 4544 13968"
	"targetname" "anti_no_knife_maker"
	"spawnflags" "1"
	"PostSpawnSpeed" "0"
	"PostSpawnInheritAngles" "0"
	"PostSpawnDirectionVariance" "0.15"
	"PostSpawnDirection" "0 0 0"
	"EntityTemplate" "anti_no_knife_template"
	"angles" "0 0 0"
	"classname" "env_entity_maker"
}

; Fixes hookrat distance view not to stuck players
filter:
{
	"targetname" "hookrat_pull_distance"
	"origin" "13800 959 11977"
	"classname" "func_door"
}

; Lower explosion on globadir from 5 to 3 sec
modify:
{
	match:
	{
		"origin" "13232 -832 12000"
		"targetname" "globadier_item_maker"
		"classname" "env_entity_maker"
	}
	delete:
	{
		"OnEntitySpawned" "globadier_projectile_mdlBreak5-1"
		"OnEntitySpawned" "globadier_projectile_makerForceSpawn4.9-1"
	}
	insert:
	{
		"OnEntitySpawned" "globadier_projectile_mdlBreak3-1"
		"OnEntitySpawned" "globadier_projectile_makerForceSpawn2.9-1"
	}
}

;------------------------------------------
; STRIPPER FIXES
;------------------------------------------

; Fix an issue with an item that can break a part in the map with its usage
modify:
{
	match:
	{
		"targetname" "trigger_once_3"
		"origin" "-3464 2560 -5056"
		"classname" "trigger_once"
	}
	replace:
	{
		"StartDisabled" "1"
	}
}
add:
{
	"model" "*92"
	"targetname" "trigger_once_3_prevention"
	"StartDisabled" "0"
	"filtername" "humans"
	"spawnflags" "1"
	"origin" "-3464 2560 -5056"
	"classname" "trigger_once"
	"OnStartTouch" "trigger_once_3Enable01"
}

; Moves afk dest from final trigger area to be handle differently
modify:
{
	match:
	{
		"targetname" "trigger_once_11"
		"origin" "12800 -1504 -2416"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_1201"
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_15501"
	}
	insert:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_1201"
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_15401"
	}
}
modify:
{
	match:
	{
		"targetname" "trigger_once_10"
		"origin" "6240 -4736 -2416"
		"classname" "trigger_once"
	}
	insert:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_13501"
	}
}
modify:
{
	match:
	{
		"targetname" "trigger_once_16"
		"origin" "7168 -6400.01 -2416"
		"classname" "trigger_once"
	}
	insert:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_13501"
	}
}


; Move afk dest from 1 trigger_once to another - in the final hard part
modify:
{
	match:
	{
		"targetname" "trigger_once_15"
		"origin" "7168 -8256 -2480"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_1201"
	}
}
modify:
{
	match:
	{
		"targetname" "trigger_once_14_second"
		"origin" "9728 -10384 -2416"
		"classname" "trigger_once"
	}
	insert:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_12301"
	}
}

; Move afk dest from 1 trigger_once to another - in the final easy part
modify:
{
	match:
	{
		"targetname" "trigger_once_10"
		"origin" "6240 -4736 -2416"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_1401"
	}
}
modify:
{
	match:
	{
		"targetname" "trigger_once_9"
		"origin" "2712 -4736 -2529.59"
		"classname" "trigger_once"
	}
	insert:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_14251"
	}
}

; Has a wrong afk dest location 
modify:
{
	match:
	{
		"targetname" "trigger_once_8"
		"origin" "3584 1000 -2992"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_901"
	}
	insert:
	{
		"OnUser1" "zombie_catch_up_teleporterAddOutputtarget dest_801"
	}
}

; Fix infinite loop on an elevator
modify:
{
	match:
	{
		"targetname" "platform_lift_move"
		"origin" "-11648.2 13632 -6544"
		"classname" "func_door"
	}
	delete:
	{
		"OnFullyOpen" "ladder_blockerBreak5-1"
		"OnFullyOpen" "servercommandCommandsay < Ladder shortcut breaks in 5 seconds >5-1"
		"OnFullyOpen" "!selfClose5-1"
		"OnFullyClosed" "!selfOpen5-1"
		"OnFullyOpen" "servercommandCommandsay < STAY OFF THE PLATFORM! >0-1"
	}
	insert:
	{
		"OnFullyOpen" "ladder_blockerBreak51"
		"OnFullyOpen" "servercommandCommandsay < Ladder shortcut breaks in 5 seconds >51"
		"OnFullyOpen" "!selfClose51"
		"OnFullyClosed" "!selfOpen51"
		"OnFullyOpen" "servercommandCommandsay < STAY OFF THE PLATFORM! >01"
	}
}

; Fix door having Touch on
modify:
{
	match:
	{
		"targetname" "easy_door_1_1"
		"origin" "-11776 3024 -4896"
		"classname" "func_door"
	}
	replace:
	{
		"spawnflags" "0"
	}
}

; Make all elevators have door silent enabled
modify:
{
	match:
	{
		"targetname" "main_lift_move"
		"origin" "-5888 -3840 4848"
		"classname" "func_door"
	}
	replace:
	{
		"spawnflags" "4096"
	}
}
modify:
{
	match:
	{
		"targetname" "platform_lift_move"
		"origin" "-11648.2 13632 -6544"
		"classname" "func_door"
	}
	replace:
	{
		"spawnflags" "4096"
	}
}
modify:
{
	match:
	{
		"targetname" "platform_lift_move_2"
		"origin" "5119.8 -13568 -5072"
		"classname" "func_door"
	}
	replace:
	{
		"spawnflags" "4096"
	}
}