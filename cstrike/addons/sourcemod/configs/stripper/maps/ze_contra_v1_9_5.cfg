;---------------------------------------------------
; Adds maploadout for the stripperable items
;---------------------------------------------------
add:
{
    "origin" "-6544 -14240 3336"
    "weapon_p90" "1"
    "weapon_hegrenade" "1"
    "weapon_elite" "1"
    "item_assaultsuit" "1"
    "targetname" "map_loadout_items"
    "spawnflags" "1"
    "classname" "game_player_equip"
}

;---------------------------------
; Gives red guy guns and shit
;---------------------------------
modify:
{
    match:
    {
        "origin" "-2694.68 8953.28 -3662.21"
        "targetname" "red_knife"
        "classname" "weapon_knife"
    }
    insert:
    {
        "OnPlayerPickup" "map_loadout_items,USE,,0,1"
    }
}

;---------------------------------
; Gives blue guy guns and shit
;---------------------------------
modify:
{
    match:
    {
        "origin" "-2693.52 8828.1 -3662.21"
        "targetname" "blue_knife"
        "classname" "weapon_knife"
    }
    insert:
    {
        "OnPlayerPickup" "map_loadout_items,USE,,0,1"
    }
}

;---------------------------------
; Gives fang guy guns and shit
;---------------------------------
modify:
{
    match:
    {
        "origin" "-2370.03 8903.27 -3638.21"
        "targetname" "fang_knife"
        "classname" "weapon_knife"
    }
    insert:
    {
        "OnPlayerPickup" "map_loadout_items,USE,,0,1"
    }
}

;---------------------------------
; Removes HP Add for final trigs
;---------------------------------
modify:
{
	match:
	{
        "targetname" "finale_zm_hurt"
        "origin" "4004 -8053.5 13684.5"
        "classname" "trigger_hurt"
	}
	Delete:
	{
        "OnStartTouch" "gaza_counter,Add,50,0,-1"
	}
}
modify:
{
	match:
	{
        "targetname" "finale_ct_hurt"
        "origin" "4004 -10175.5 13684.5"
        "classname" "trigger_hurt"
	}
	Delete:
	{
        "OnStartTouch" "gaza_counter,Add,50,0,-1"
	}
}


;-----------------------------------------------------------------------------------------
; Removes trigger hurt for red guy and fixes him getting killed and restting dmg filter
;-----------------------------------------------------------------------------------------
modify:
{
    match:
    {
        "targetname" "red_reset_damagefilter"
        "origin" "-2688.65 8954.01 -3683.77"
        "classname" "trigger_once"
    }
    replace:
    {
        "filtername" "filter_red_item"
    }
}
modify:
{
    match:
    {
        "targetname" "red_item_hurt_user"
        "origin" "-2689.15 8954.01 -3673.43"
        "classname" "trigger_hurt"
    }
    replace:
    {
        "filtername" "filter_red_item"
    }
}
modify:
{
	match:
	{
        "origin" "-2694.68 8953.28 -3662.21"
        "targetname" "red_knife"
        "classname" "weapon_knife"
	}
    delete:
	{
        "OnPlayerPickup" "filter_red_item,TestActivator,,0,-1"
	}
    insert:
	{
        "OnPlayerPickup" "!activator,addoutput,targetname red_item_filter_guy,0,-1"
	}
}
modify:
{
	match:
	{
        "targetname" "red_item_hitbox"
        "origin" "-2691.65 8954.01 -3627.6"
        "classname" "func_physbox_multiplayer"
	}
    delete:
	{
        "OnBreak" "red_item_hurt_user,Enable,,0.2,1"
	}
    insert:
	{
        "OnBreak" "red_item_hurt_user,Enable,,0.1,1"
        "OnBreak" "red_item_hurt_user,Kill,,0.2,1"
	}
}

;-------------------------------------------------------------------------------------------
; Removes trigger hurt for blue guy and fixes him getting killed and restting dmg filter
;-------------------------------------------------------------------------------------------
modify:
{
    match:
    {
        "targetname" "blue_reset_damagefilter"
        "origin" "-2687.65 8829.01 -3683.77"
        "classname" "trigger_once"
    }
    replace:
    {
        "filtername" "filter_blue_item"
    }
}
modify:
{
    match:
    {
        "targetname" "blue_item_hurt_user"
        "origin" "-2688.15 8828.01 -3646.8"
        "classname" "trigger_hurt"
    }
    replace:
    {
        "filtername" "filter_blue_item"
    }
}
modify:
{
	match:
	{
        "origin" "-2693.52 8828.1 -3662.21"
        "targetname" "blue_knife"
        "classname" "weapon_knife"
	}
    delete:
	{
        "OnPlayerPickup" "filter_blue_item,TestActivator,,0,-1"
	}
    insert:
	{
        "OnPlayerPickup" "!activator,addoutput,targetname blue_item_filter_guy,0,-1"
	}
}
modify:
{
	match:
	{
        "targetname" "blue_item_hitbox"
        "origin" "-2691.65 8828 -3628.61"
        "classname" "func_physbox_multiplayer"
	}
    delete:
	{
        "OnBreak" "blue_item_hurt_user,Enable,,0.2,1"
	}
    insert:
	{
        "OnBreak" "blue_item_hurt_user,Enable,,0.1,1"
        "OnBreak" "blue_item_hurt_user,Kill,,0.2,1"
	}
}

;-------------------------------------------------------------------------------------------
; Removes trigger hurt for fang guy and fixes him getting killed and restting dmg filter
;-------------------------------------------------------------------------------------------
modify:
{
    match:
    {
        "targetname" "fang_item_melee_flame_trigger"
        "origin" "-2245.97 8906 -3594.12"
        "classname" "trigger_hurt"
    }
    insert:
    {
        "OnHurtPlayer" "!activator,ignitelifetime,1,0,-1"
    }
}
modify:
{
    match:
    {
        "targetname" "fang_item_flame_hurt"
        "origin" "-2237.98 8903 -3578.11"
        "classname" "trigger_hurt"
    }
    insert:
    {
        "OnHurtPlayer" "!activator,ignitelifetime,1,0,-1"
    }
}
modify:
{
    match:
    {
        "targetname" "fang_item_strip"
        "origin" "-2364.45 8903.97 -3635.79"
        "classname" "trigger_once"
    }
    insert:
    {
        "filtername" "MapFilterCT"
    }
}
modify:
{
    match:
    {
        "targetname" "fang_push_forward"
        "origin" "-2363.99 8904.02 -3623.79"
        "classname" "trigger_push"
    }
    replace:
    {
        "filtername" "filter_fang_item"
    }
}
modify:
{
    match:
    {
        "targetname" "fang_reset_damagefilter"
        "origin" "-2364 8904 -3659.77"
        "classname" "trigger_once"
    }
    replace:
    {
        "filtername" "filter_fang_item"
    }
}
modify:
{
    match:
    {
        "targetname" "fang_item_hurt_user"
        "origin" "-2372.5 8904 -3637.43"
        "classname" "trigger_hurt"
    }
    replace:
    {
        "filtername" "filter_fang_item"
    }
}
modify:
{
	match:
	{
        "origin" "-2370.03 8903.27 -3638.21"
        "targetname" "fang_knife"
        "classname" "weapon_knife"
	}
    delete:
	{
        "OnPlayerPickup" "filter_fang_item,TestActivator,,0,-1"
	}
    insert:
	{
        "OnPlayerPickup" "!activator,addoutput,targetname fang_item_filter_guy,0,-1"
	}
}
modify:
{
	match:
	{
        "targetname" "fang_item_hitbox"
        "origin" "-2367 8904 -3603.6"
        "classname" "func_physbox_multiplayer"
	}
    delete:
	{
        "OnBreak" "fang_item_hurt_user,Enable,,0.2,1"
	}
    insert:
	{
        "OnBreak" "fang_item_hurt_user,Enable,,0.1,1"
        "OnBreak" "fang_item_hurt_user,Kill,,0.2,1"
	}
}



;----------------
; Wallboss fixes
;----------------
modify:
{
	match:
	{
        "targetname" "s1_facility_bridge"
        "origin" "3240 520 4307"
        "classname" "func_movelinear"
	}
    insert:
	{
        "OnFullyOpen" "wallboss_addhealth,Enable,,0.2,1"
	}
}
  
modify:
{
	match:
	{
        "targetname" "wallboss_weakspot2_breakable"
        "origin" "3048 2672 4520"
        "classname" "func_breakable"
	}
    insert:
	{
        "damagefilter" "Filter_Nada"
	}
}

modify:
{
	match:
	{
        "targetname" "wallboss_weakspot3_breakable"
        "origin" "3240 2672 4520"
        "classname" "func_breakable"
	}
    insert:
	{
        "damagefilter" "Filter_Nada"
	}
}

modify:
{
	match:
	{
        "targetname" "wallboss_weakspot4_breakable"
        "origin" "3432 2672 4520"
        "classname" "func_breakable"
	}
    insert:
	{
        "damagefilter" "Filter_Nada"
	}
}

modify:
{
	match:
	{
        "targetname" "wallboss_weakspot1_breakable"
        "origin" "3240 2672 4712"
        "classname" "func_breakable"
	}
    insert:
	{
        "damagefilter" "Filter_Nada"
	}
}


modify:
{
	match:
	{
        "targetname" "wallboss_mainbody"
        "origin" "3240 2816 4680"
        "classname" "func_door"
	}
    insert:
	{
        "OnUser1" "wallboss_weakspot1_breakable,SetDamageFilter,,2,-1"
        "OnUser1" "wallboss_weakspot2_breakable,SetDamageFilter,,2,-1"
        "OnUser1" "wallboss_weakspot3_breakable,SetDamageFilter,,2,-1"
        "OnUser1" "wallboss_weakspot4_breakable,SetDamageFilter,,2,-1"
	}
}



;----------------
; Lowers first miniboss hp
;----------------
modify:
{
	match:
	{
        "targetname" "miniboss1_hp_add_trigger"
        "origin" "-4864 -6624 2022.5"
        "classname" "trigger_once"
	}
    delete:
	{
        "OnStartTouch" "Boss_HealthBackup,Add,80,0,1"
        "OnStartTouch" "Boss_Health,Add,80,0,1"
        "OnStartTouch" "miniboss1_math,Add,80,0,1"
	}
    insert:
	{
        "OnStartTouch" "Boss_HealthBackup,Add,55,0,1"
        "OnStartTouch" "Boss_Health,Add,55,0,1"
        "OnStartTouch" "miniboss1_math,Add,55,0,1"
	}
}

;----------------
; Lowers last boss hp
;----------------
modify:
{
	match:
	{
        "targetname" "final_boss_hp_add_trigger"
        "origin" "-12594.5 -156 -6063"
        "classname" "trigger_once"
	}
    delete:
	{
        "OnStartTouch" "finalboss_HealthBackup,Add,100,0,1"
        "OnStartTouch" "final_Health,Add,100,0,1"
        "OnStartTouch" "minifinal1_math,Add,100,0,1"
	}
    insert:
	{
        "OnStartTouch" "finalboss_HealthBackup,Add,70,0,1"
        "OnStartTouch" "final_Health,Add,70,0,1"
        "OnStartTouch" "minifinal1_math,Add,70,0,1"
	}
}


;----------------
; Escape pod door now force closes
;----------------
modify:
{
	match:
	{
        "targetname" "s3_pod_door"
        "origin" "15370.9 -9024 -4144"
        "classname" "func_movelinear"
	}
    replace:
	{
        "blockdamage" "99999"
	}
}


;----------------
; Fixes duoboss not getting hp added properly
;----------------
modify:
{
	match:
	{
        "targetname" "s2_before_terminator_door"
        "origin" "-2496 14773 6860"
        "classname" "func_movelinear"
	}
    delete:
	{
        "OnFullyClosed" "duoboss_adder,Enable,,0,1"
	}
}

modify:
{
	match:
	{
        "targetname" "s2_duoboss_sprite_dormant_door"
        "origin" "-1152 14752 7376"
        "classname" "func_door"
	}
    insert:
	{
        "OnFullyClosed" "duoboss_adder,Enable,,0.02,1"
	}
}
  
;----------------
; Enables floor exploding trigger faster in stage 2 for better balancing
;----------------
modify:
{
	match:
	{
        
        "origin" "-9599.5 -7048 -1835"
        "classname" "trigger_once"
	}
    delete:
	{
        "OnStartTouch" "s2_explosion_particle,Start,,20,1"
        "OnStartTouch" "s2_explosion_particle,Stop,,22,1"
        "OnStartTouch" "s2_floor_break,Break,,20,1"
        "OnStartTouch" "sound_explosion3,PlaySound,,20,1"
        "OnStartTouch" "console,Command,say *** FALL BACK! ***,20,1"
	}
    insert:
	{
        "OnStartTouch" "s2_explosion_particle,Start,,10,1"
        "OnStartTouch" "s2_explosion_particle,Stop,,12,1"
        "OnStartTouch" "s2_floor_break,Break,,10,1"
        "OnStartTouch" "sound_explosion3,PlaySound,,10,1"
        "OnStartTouch" "console,Command,say *** FALL BACK! ***,10,1"
	}
}

;----------------
; Increases Spidal fire
;----------------

modify:
{
	match:
	{
        "targetname" "Guard_Boss_Particle_Fire_Hurt"
        "origin" "332 7243.5 -2580.49"
        "classname" "trigger_hurt"
	}
    replace:
	{
        "damage" "80"
	}
}
  

;----------------
; Nerf Heal Item
;----------------

modify:
{
	match:
	{
        "targetname" "Item_heart_crystal_trigger"
        "origin" "-2265.94 11015.1 13247.5"
        "classname" "trigger_hurt"
	}
    delete:
	{
        "OnStartTouch" "!activator,AddOutput,max_health 250,0,-1"
	}
    insert:
	{
        "OnStartTouch" "!activator,AddOutput,max_health 180,0,-1"
	}
}


;----------------
; Reduce door timer to spidal
;----------------


modify:
{
	match:
	{
        "origin" "-694 2514 6698.57"
        "classname" "trigger_once"
	}
    delete:
	{
        "OnStartTouch" "console,Command,say *** DOOR OPENS IN 20 SECONDS ***,0,1"
        "OnStartTouch" "OnStartTouch,s1_facilitydoor12,Open,20,1"
	}
    insert:
	{
        "OnStartTouch" "console,Command,say *** DOOR OPENS IN 10 SECONDS ***,0,1"
        "OnStartTouch" "OnStartTouch,s1_facilitydoor12,Open,10,1"
	}
}