;-- change laser distance
modify:
{
	match:
	{
		"targetname" "L3lasermid"
	}
	replace:
	{
		"movedistance" "3000"
	}
}
modify:
{
	match:
	{
		"targetname" "L3laserhigh"
	}
	replace:
	{
		"movedistance" "3000"
	}
}
modify:
{
	match:
	{
		"targetname" "L3laserlow"
	}
	replace:
	{
		"movedistance" "3000"
	}
}

;-- buff boss health
modify:
{
	match:
	{
		"model" "*170"
		"targetname" "l2Bosshpscale"
	}
	delete:
	{
		"OnStartTouch" "l2Boss,AddHealth,1500,0,-1"
	}
	insert:
	{
		"OnStartTouch" "l2Boss,AddHealth,1750,0.1,-1"
	}
}
modify:
{
	match:
	{
		"model" "*253"
		"targetname" "l3bosshpscale"
	}
	delete:
	{
		"OnStartTouch" "l3boss,SetHealth,20000,0,1"
		"OnStartTouch" "l3boss,AddHealth,1700,0,-1"
	}
	insert:
	{
		"OnStartTouch" "l3boss,SetHealth,25000,0,1"
		"OnStartTouch" "l3boss,AddHealth,2000,0.1,-1"
	}
}

;-- fix blockable elevator
modify:
{
	match:
	{
		"model" "*148"
		"targetname" "lift1"
	}
	replace:
	{
		"dmg" "50"
		"spawnflags" "18"
	}
}

;-- Fix randomstage final teleport not working which should now also trigger nuke
modify:
{
	match:
	{
		"classname" "math_counter"
		"targetname" "randomcounter"
	}
	delete:
	{
		"OnHitMax" "randommodetp,Enable,,20,-1"
		"OnHitMax" "randommodetp,AddOutput,target randomwin,0,-1"
	}
	insert:
	{
		"OnHitMax" "randommodetp,Enable,,20.04,-1"
		"OnHitMax" "randommodetp,AddOutput,target randomwin,20.02,-1"
	}
}

;-- Fix randompicker duplicate room issue
modify
{
	match:
	{
		"targetname" "randomtimer"
		"classname" "logic_timer"
	}
	delete:
	{
		"OnTimer" "randommodetp,Enable,,0.05,-1"
		"OnTimer" "randommodetp,Disable,,0.07,-1"
		"OnTimer" "randomcase,PickRandom,,0,-1"
	}
	insert:
	{
		"OnTimer" "randommodetpzm,AddOutput,target level2bosszm,0,-1"
		"OnTimer" "randommodetpzm,Enable,,0.02,-1"
		"OnTimer" "randommodetpzm,Disable,,0.04,-1"
		"OnTimer" "randomcase,PickRandom,,0.06,-1"
		"OnTimer" "randommodetp,Enable,,0.08,-1"
		"OnTimer" "randommodetp,Disable,,0.10,-1"
	}
}

;-- stage 1 - disable lasers if boss dies
modify:
{
	match:
	{
		"targetname" "lasercube"
		"classname" "func_breakable"
	}
	insert:
	{
		"OnBreak" "lasertimer,Disable,,1,1"
		"OnBreak" "lasertimer,Disable,,2,1"
	}
}

; fix invisible crouch laser on bossfight
modify:
{
	match:
	{
		"targetname" "l3bosslaserhighfx"
		"classname" "env_beam"
	}
	replace:
	{
		"life" "0"
	}
}