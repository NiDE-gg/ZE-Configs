;--------------------------------------------------------------------
;STRIPPER CFG BY MOLTARD http://steamcommunity.com/id/0123456789ABC/
;--------------------------------------------------------------------

;----------------------
;FIX TELEPORT GLITCHES
;----------------------

modify:
{
	match:
	{
		"classname" "func_movelinear"
		"targetname" "m_4"
		"origin" "-2796 3232 -465.5"
		"hammerid" "6273"
	}
	insert:
	{
		"OnFullyOpen" "t_1,AddOutput,target u_30a,0,1"
		"OnFullyOpen" "t_1,Enable,,0.1,1"
	}
}

; Make sure everyone who are not inside the helicopter get teleported
; To the nuke area when helicopter reach last path_track (outside of the trigger_teleport zone)
modify:
{
	match:
	{
		"classname" "path_track"
		"targetname" "z_8"
		"origin" "-5120 3648 960"
		"hammerid" "6951"
	}
	insert:
	{
		"OnFullyOpen" "t_10,Enable,,0,1"
	}
}

modify:
{
	match:
	{
		"classname" "logic_relay"
		"targetname" "d_3"
		"origin" "1096 -48 26"
		"hammerid" "8028"
	}
	delete:
	{
		"OnTrigger" "tele_ze,KillHierarchy,,21,-1"
	}
	insert:
	{
		"OnTrigger" "tele_ze,KillHierarchy,,27,-1"
	}
}
modify:
{
	match:
	{
		"classname" "trigger_teleport"
		"targetname" "tele_ze"
		"origin" "-3114.5 5667.5 -1344"
		"model" "*182"
		"hammerid" "720550"
	}
	insert:
	{
		"filtername" "zombie_filter"
	}
}

; No early break fence

modify:
{
	match:
	{
		"origin" "-2715 3232 111"
		"classname" "func_breakable"
	}
	replace:
	{
		"spawnflags" "1"
	}
	insert:
	{
		"targetname" "last_breakable"
	}
}
modify:
{
	match:
	{
		"targetname" "m_4"
		"classname" "func_movelinear"
	}
	insert:
	{
		"OnFullyOpen" "last_breakable,Break,,0,1"
	}
}

;--------------------------------------------
; Fixes nuke by adding extra damage to it
;--------------------------------------------
modify:
{
	match:
	{
		"targetname" "end_2"
		"classname" "trigger_hurt"
	}
	replace:
	{
		"damagecap" "999999"
		"damage" "999999"
	}
}

;----------------------------------------
; Prevent elevators get stuck by players
;----------------------------------------
modify:
{
	match:
	{
		"targetname" "/(m_[3-6]|a_1)/"
		"classname" "func_movelinear"
	}
	replace:
	{
		"blockdamage" "999999"
	}
}


;------------
; Fix AFK TP
;------------
modify:
{
	match:
	{
		"targetname" "kill3"
		"classname" "logic_relay"
	}
	delete:
	{
		"OnTrigger" "point_r_2,KillHierarchy,,0,-1"
	}
}

add:
{
	"model" "*86"
	"targetname" "u_30"
	"target" "u_30a"
	"StartDisabled" "1"
	"spawnflags" "1"
	"origin" "4588 4355 1352"
	"classname" "trigger_teleport"
}

;------------------
; Fix flamethrower
;------------------
filter:
{
	"targetname" "sound2"
	"hammerid" "782431"
}

modify:
{
	match:
	{
		"targetname" "ent7"
		"classname" "info_particle_system"
	}
	replace:
	{
		"effect_name" "muzzle_machinegun"
	}
}

modify:
{
	match:
	{
		"targetname" "sound1"
		"classname" "ambient_generic"
	}
	insert:
	{
		"SourceEntityName" "ignite2"
	}
}

add:
{
	"origin" "1823 1547 383"
	"targetname" "flame_relay"
	"StartDisabled" "0"
	"spawnflags" "0"
	"classname" "logic_relay"
	"OnTrigger" "lanza_c,Compare,,0,-1"
	"OnTrigger" "!self,FireUser1,,1.05,-1"
}

modify:
{
	match:
	{
		"targetname" "physbox"
		"classname" "func_physbox_multiplayer"
	}
	delete:
	{
		"OnPlayerUse" "lanza_c,Compare,,0,-1"
	}
	insert:
	{
		"OnPlayerUse" "flame_relay,Trigger,,0,-1"
	}
}

;---------------------------------
; Fix not adjustable music volume
;---------------------------------
modify:
{
	match:
	{
		"message" "ze_bio_1/33 - save reb.mp3"
		"classname" "ambient_generic"
	}
	replace:
	{
		"message" "#ze_bio_1/33 - save reb.mp3"
	}
}
modify:
{
	match:
	{
		"message" "ze_bio_1/ze_biohazard_01.mp3"
		"classname" "ambient_generic"
	}
	replace:
	{
		"message" "#ze_bio_1/ze_biohazard_01.mp3"
	}
}
modify:
{
	match:
	{
		"message" "ze_bio_1/resident evil 1 - 18 - more rooms.mp3"
		"classname" "ambient_generic"
	}
	replace:
	{
		"message" "#ze_bio_1/resident evil 1 - 18 - more rooms.mp3"
	}
}
modify:
{
	match:
	{
		"message" "ze_bio_1/resident evil orchestral - 02 - re1 - i won't finish this just as a dream.mp3"
		"classname" "ambient_generic"
	}
	replace:
	{
		"message" "#ze_bio_1/resident evil orchestral - 02 - re1 - i won't finish this just as a dream.mp3"
	}
}
