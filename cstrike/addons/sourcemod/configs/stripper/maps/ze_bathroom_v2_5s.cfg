;---------
; BOSS HP
;---------
modify:
{
	match:
	{
		"targetname" "kostka_hp"
	}
	replace:
	{
		"max" "1300"
		"startvalue" "120"
	}
}
modify:
{
	match:
	{
		"targetname" "kostka_hp_backup"
	}
	replace:
	{
		"max" "999999"
		"startvalue" "120"
	}
}

;-------------------------------------------------------------
;Fix teleport avoid spot at the edge of the toilet on stage 1
;-------------------------------------------------------------
add:
{
	"targetname" "level_1_teleport_kolemhajzlu"
	"classname" "trigger_teleport"
	"StartDisabled" "0"
	"target" "level_2_port_podhajzlem"
	"spawnflags" "1"
	"origin" "-800 7712 -2336"
	"OnUser1" "!self,AddOutput,solid 2,0,1"
	"OnUser1" "!self,AddOutput,mins -160 -160 -160,0.1,1"
	"OnUser1" "!self,AddOutput,maxs 160 160 160,0.1,1"
}
modify:
{
	match:
	{
		"classname" "logic_auto"
		"hammerid" "150432"
	}
	insert:
	{
		"OnMapSpawn" "level_1_teleport_kolemhajzlu,FireUser1,,0,-1"
	}
}

;--------------------------------
; Fix incorrect targetname usage
;--------------------------------
modify:
{
	match:
	{
		"targetname" "/boss_(target2a|target2)/"
		"classname" "filter_activator_name"
	}
	delete:
	{
		"OnFail" "!activator,AddOutput,targetname player,4.99,-1"
	}
	insert:
	{
		"OnFail" "!activator,AddOutput,targetname ,4.99,-1"
	}
}

;; _

;; fix hold messages

modify:
{
	match:
	{
		"targetname" "skrin_trigger_1"
		"origin" "4096 6783 -2560"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnStartTouch" "consola,Command,say Resist for 25 seconds.,0,1"
	}
	insert:
	{
		"OnStartTouch" "consola,Command,say Resist for 30 seconds.,0,1"
	}
}
modify:
{
	match:
	{
		"origin" "2624 6848 -1840"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnStartTouch" "consola,Command,say Resist for 20 seconds.,0,1"
	}
	insert:
	{
		"OnStartTouch" "consola,Command,say Resist for 25 seconds.,0,1"
	}
}
modify:
{
	match:
	{
		"origin" "6447.5 7424 -427.25"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnStartTouch" "consola,Command,say Resist for 25 seconds.,0,1"
	}
	insert:
	{
		"OnStartTouch" "consola,Command,say Resist for 30 seconds.,0,1"
	}
}

;; stage 2 - fix toilet roll trap

add:
{
	"model" "*74"
	"StartDisabled" "1"
	"targetname" "police_push"
	"speed" "12000"
	"spawnflags" "12"
	"pushdir" "0 -90 0"
	"origin" "804 2740 79"
	"alternateticksfix" "0"
	"classname" "trigger_push"
}

modify:
{
	match:
	{
		"targetname" "police_phys"
		"classname" "func_physbox_multiplayer"
	}
	replace:
	{
		"spawnflags" "36865"
		"massScale" ".50"
	}
	delete:
	{
		"parentname" "police_door"
	}
}
modify:
{
	match:
	{
		"targetname" "drzak"
		"classname" "func_breakable"
	}
	insert:
	{
		"OnBreak" "police_phys,EnableMotion,,0.1,1"
		"OnBreak" "police_push,Enable,,0,1"
		"OnBreak" "police_push,Kill,,3,1"
	}
}

;; stage 1 - fix sponge getting stuck on mouse trap

modify:
{
	match:
	{
		"targetname" "zataras_trscktrain"
		"classname" "func_tanktrain"
	}
	replace:
	{
		"spawnflags" "538"
	}
}
modify:
{
	match:
	{
		"model" "models/cuniczek/bathroom/sponge.mdl"
		"origin" "7803 4734 -323"
		"classname" "prop_dynamic"
	}
	replace:
	{
		"spawnflags" "256"
	}
}
modify:
{
	match:
	{
		"targetname" "padajicihouba_teleport"
		"classname" "trigger_teleport"
	}
	replace:
	{
		"origin" "7806.24 4654.67 -405.5"
		"StartDisabled" "0"
	}
	insert:
	{
		"parentname" "zataras_trscktrain"
	}
}

;; stage 2 - players can't block soap

modify:
{
	match:
	{
		"targetname" "mydlo_train"
		"classname" "func_tracktrain"
	}
	replace:
	{
		"spawnflags" "528"
	}
}

;; stage 1 - ladder issue

add:
{
	"origin" "-809 10195 -4605"
	"StartDisabled" "0"
	"spawnflags" "0"
	"solid" "6"
	"skin" "0"
	"SetBodyGroup" "0"
	"rendermode" "10"
	"renderfx" "0"
	"rendercolor" "255 255 255"
	"renderamt" "255"
	"RandomAnimation" "0"
	"pressuredelay" "0"
	"PerformanceMode" "0"
	"model" "models/props_lab/blastdoor001c.mdl"
	"mindxlevel" "0"
	"MinAnimTime" "5"
	"maxdxlevel" "0"
	"MaxAnimTime" "10"
	"fadescale" "1"
	"fademindist" "-1"
	"fademaxdist" "0"
	"ExplodeRadius" "0"
	"ExplodeDamage" "0"
	"disableshadows" "1"
	"disablereceiveshadows" "1"
	"DisableBoneFollowers" "0"
	"angles" "-45 90 0"
	"classname" "prop_dynamic"
}