;------------------------------------------------------------
; Keeps server updated with stripper version
;------------------------------------------------------------
modify:
{
	match:
	{
        "origin" "-10255.6 -15154 -456"
        "classname" "logic_auto"
	}
	insert:
	{
        "OnMapSpawn" "console,Command,say *** Stripper 4 loaded ***,7,-1"
	}
}

;--------------------------
; Prologue CHANGES/FIXES
;--------------------------
; Extends the zombie teleport from maradox into the mike room
modify:
{
	match:
	{
        "origin" "-12755 -6454 310.53"
        "classname" "trigger_once"
	}
	delete:
	{
        "OnStartTouch" "teleport_maradox_ending_zombie,Enable,,8,-1"
        "OnStartTouch" "console,Command,say < Zombies teleport in 8 seconds >,0,-1"
	}
	insert:
	{
        "OnStartTouch" "teleport_maradox_ending_zombie,Enable,,15,-1"
        "OnStartTouch" "console,Command,say < Zombies teleport in 15 seconds >,0,-1"
	}
}

; Decreases door timers on mikes room
modify:
{
	match:
	{
        "targetname" "button_1"
        "origin" "-14770.3 -3574 322.53"
        "classname" "func_button"
	}
	delete:
	{
        "OnPressed" "wall_1,break,,25,-1"
        "OnPressed" "console,Command,say < Defend for 25 seconds >,0,-1"
        "OnPressed" "mike_zm_tp_afk_1,Enable,,40,-1"
	}
	insert:
	{
        "OnPressed" "wall_1,break,,15,-1"
        "OnPressed" "console,Command,say < Defend for 15 seconds >,0,-1"
        "OnPressed" "mike_zm_tp_afk_1,Enable,,50,-1"
	}
}
modify:
{
	match:
	{
        "targetname" "button_2"
        "origin" "-10834.3 74 322.53"
        "classname" "func_button"
	}
	delete:
	{
        "OnPressed" "wall_2,break,,25,-1"
        "OnPressed" "console,Command,say < Defend for 25 seconds >,0,-1"
        "OnPressed" "mike_zm_tp_afk_2,Enable,,40,-1"
	}
	insert:
	{
        "OnPressed" "wall_2,break,,15,-1"
        "OnPressed" "console,Command,say < Defend for 15 seconds >,0,-1"
        "OnPressed" "mike_zm_tp_afk_2,Enable,,50,-1"
	}
}
modify:
{
	match:
	{
        "targetname" "button_3"
        "origin" "-13396.6 3335.73 320.73"
        "classname" "func_button"
	}
	delete:
	{
        "OnPressed" "wall_3,break,,25,-1"
        "OnPressed" "console,Command,say < Defend for 25 seconds >,0,-1"
        "OnPressed" "mike_zm_tp_afk_3,Enable,,40,-1"
	}
	insert:
	{
        "OnPressed" "wall_3,break,,15,-1"
        "OnPressed" "console,Command,say < Defend for 15 seconds >,0,-1"
        "OnPressed" "mike_zm_tp_afk_3,Enable,,50,-1"
	}
}
modify:
{
	match:
	{
        "targetname" "button_4"
        "origin" "-14674.3 8858 322.53"
        "classname" "func_button"
	}
	delete:
	{
        "OnPressed" "wall_4,Open,,25,-1"
        "OnPressed" "console,Command,say < Defend for 25 seconds >,0,-1"
        "OnPressed" "console,Command,say < > ITEMS ARE NOW LOCKED <>,30,-1"
        "OnPressed" "disable_all_zombie_items,Trigger,,25,-1"
        "OnPressed" "disable_all_human_items,Trigger,,25,-1"
        "OnPressed" "random_npc_spawner_timer,Disable,,25,1"
	}
	insert:
	{
        "OnPressed" "wall_4,Open,,15,-1"
        "OnPressed" "console,Command,say < Defend for 15 seconds >,0,-1"
        "OnPressed" "console,Command,say < > ITEMS ARE NOW LOCKED <>,20,-1"
        "OnPressed" "disable_all_zombie_items,Trigger,,15,-1"
        "OnPressed" "disable_all_human_items,Trigger,,15,-1"
        "OnPressed" "random_npc_spawner_timer,Disable,,15,1"
	}
}

; Moves the trigger_teleport from maradox room closer to the final door opening for faster transition
modify:
{
	match:
	{
        "targetname" "teleport_maradox_ending_human"
        "origin" "8064 12832 -10984"
        "classname" "trigger_teleport"
	}
	replace:
	{
        "origin" "9344 12832 -10984"
	}
}

; Fixes a message bug on maradoxs room
modify:
{
	match:
	{
        "targetname" "s1_gate_move"
        "origin" "14089.7 6846 -13632"
        "classname" "func_movelinear"
	}
	insert:
	{
        "OnFullyOpen" "maradox_relay_trigger_1,Kill,,0,-1"
	}
}

; Delays a teleporter at the push part of maradoxes room
modify:
{
	match:
	{
        "targetname" "s1_trigger_once_3"
        "origin" "11561.7 10142 -11776"
        "classname" "trigger_once"
	}
	delete:
	{
        "OnStartTouch" "platform_spawn_maker,ForceSpawn,,7,-1"
	}
	insert:
	{
        "OnStartTouch" "platform_spawn_maker,ForceSpawn,,14,-1"
	}
}

; Changes a gameplay on Uverins room so humans only can use the trigger_push that is spawned on that room
modify:
{
	match:
	{
        "targetname" "uverin_cybergrind_trampolinepush"
        "origin" "-2448 9504 10068"
        "classname" "trigger_push"
	}
	insert:
	{
        "filtername" "MapFilterCT"
	}
}

; Reduces hp on the zombies during the ending of Uverins room
modify:
{
	match:
	{
        "targetname" "uverin_hpgive"
        "origin" "-2384 9440 9776"
        "classname" "trigger_multiple"
	}
	delete:
	{
        "OnStartTouch" "!activator,AddOutput,health 1000,0.01,-1"
        "OnEndTouch" "!activator,AddOutput,health 1000,0,-1"
	}
	insert:
	{
        "OnStartTouch" "!activator,AddOutput,health 100,0.01,-1"
        "OnEndTouch" "!activator,AddOutput,health 100,0,-1"
	}
}


;--------------------------
; Stage 1 CHANGES/FIXES
;--------------------------
; Removes a few laser NPC spawns from the boat part on hobgoblins room 
modify:
{
	match:
	{
        "origin" "-10576 -14808 -456"
        "targetname" "hobgoblin_npc_relay"
        "classname" "logic_relay"
	}
	delete:
	{
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin 41.59 -6419.12 -5831.38,5,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,46.5,1"
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin 76.96 -5692.74 -5947.52,22,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,22.5,1"
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin -79.57 -5881.23 -5623.38,20,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,20.5,1"
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin 254.94 -5772.39 -5255.38,6,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,6.5,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,45.5,1"
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin 76.96 -5692.74 -5947.52,45,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,5.5,1"
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin 41.59 -6419.12 -5831.38,46,1"
	}
	insert:
	{
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin 41.59 -6419.12 -5831.38,15,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,15.5,1"
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin 254.94 -5772.39 -5255.38,30,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,30.5,1"
        "OnTrigger" "Temp_NPC_Special,AddOutput,origin 76.96 -5692.74 -5947.52,40,1"
        "OnTrigger" "Temp_NPC_Special,ForceSpawn,,40.5,1"
	}
}

; Fixes heavys room with multiple issues
modify:
{
	match:
	{
        "origin" "-11936 -13947 6864"
        "classname" "func_breakable"
	}
	delete:
	{
        "OnBreak" "heavy_tp_trig1,Enable,,5,1"
        "OnBreak" "console,Command,say >ZM TP IN 5s<,5,1"
        "OnBreak" "heavy_fac_dorr,Close,,5,1"
	}
	insert:
	{
        "OnBreak" "heavy_tp_trig1,Enable,,15,1"
        "OnBreak" "console,Command,say >ZM TP IN 10s<,5,1"
        "OnBreak" "heavy_fac_dorr,Close,,15,1"
	}
}
modify:
{
	match:
	{
        "targetname" "heavy_box2"
        "origin" "-11129.1 -12868.1 7168"
        "classname" "func_breakable"
	}
	delete:
	{
        "OnBreak" "console,Command,say >ZM TP IN 15s<,0,1"
        "OnBreak" "heavy_tp_trig3,Enable,,15,1"
	}
}
filter:
{
    "targetname" "heavy_tp_trig3"
    "origin" "-11624 -13475 7280"
    "classname" "trigger_teleport"
}
; Fixes a too fast teleport in heavys room after the elevator
modify:
{
	match:
	{
        "targetname" "bridge_xd"
        "origin" "-12392 -13315 7248"
        "classname" "trigger_once"
	}
	delete:
	{
        "OnStartTouch" "heavy_tp_trig2,Enable,,5,1"
        "OnStartTouch" "console,Command,say >ZM TP IN 5s<,0.7,1"
	}
	insert:
	{
        "OnStartTouch" "heavy_tp_trig2,Enable,,15,1"
        "OnStartTouch" "console,Command,say >ZM TP IN 15s<,0,1"
	}
}

; Massively reduces fireball damage on chartas room 40 < 15
modify:
{
	match:
	{
        "targetname" "laser_hurt"
        "origin" "-7175 -4416 1283.09"
        "classname" "trigger_hurt"
	}
	replace:
	{
        "damagecap" "99999"
        "damage" "15"
	}
}

; An attempt to fix malgos map area
modify:
{
	match:
	{
        "origin" "2343.71 -14115 -1553"
        "targetname" "concert_start_relay"
        "classname" "logic_relay"
	}
	delete:
	{
        "OnTrigger" "concert_player_counter,Disable,,0.03,-1"
        "OnTrigger" "concert_player_counter,Enable,,0.04,-1"
	}
	insert:
	{
        "OnTrigger" "concert_player_counter,Disable,,1,-1"
        "OnTrigger" "concert_player_counter,Enable,,2,-1"
	}
}

;--------------------------
; Stage 2 CHANGES/FIXES
;--------------------------
; Removes existing NPC locations that I forgot to remove
filter:
{
    "targetname" "dsv_npc_location"
    "classname" "func_breakable"
}
filter:
{
    "targetname" "andrew_npc_location"
    "classname" "func_breakable"
}

; Massive teleport changes to fucksys room
modify:
{
	match:
	{
        "origin" "2952.71 -8997.54 -13900"
        "targetname" "f4_zm_des1"
        "classname" "info_teleport_destination"
	}
	replace:
	{
        "origin" "2953 -9613 -13864"
	}
}
modify:
{
	match:
	{
        "targetname" "f4_house"
        "origin" "3024 -8532 -13863"
        "classname" "trigger_once"
	}
	delete:
	{
        "OnStartTouch" "f4_trig1,Enable,,5,1"
	}
	insert:
	{
        "OnStartTouch" "f4_trig1,Enable,,15,1"
	}
}
modify:
{
	match:
	{
        "targetname" "f4_insidehouse"
        "origin" "3136 -6848 -13467.4"
        "classname" "trigger_once"
	}
	delete:
	{
        "OnStartTouch" "f4_trig2,Enable,,5,1"
	}
	insert:
	{
        "OnStartTouch" "f4_trig2,Enable,,15,1"
	}
}

; Fixes a cleanup relay on hobbitten room that kills the afk teleports
modify:
{
	match:
	{
        "origin" "-10640 -14944 -456"
        "targetname" "hobbitten_cleanup_relay"
        "classname" "logic_relay"
	}
	delete:
	{
        "OnTrigger" "dragon_finish_teleport,Kill,,5,-1"
        "OnTrigger" "dragon_finish_zombie_teleport,Kill,,5,-1"
	}
}

; Delays the cage opening by 5 seconds on dsvdsvd room
modify:
{
	match:
	{
        "origin" "11840.7 6968 3697"
        "targetname" "MSom_ending_relay"
        "classname" "logic_relay"
	}
	delete:
	{
        "OnTrigger" "MSom_jail_grate,Break,,12,1"
        "OnTrigger" "console,Command,say Zombies released in 5 sec,7,1"
	}
	insert:
	{
        "OnTrigger" "MSom_jail_grate,Break,,17,1"
        "OnTrigger" "console,Command,say Zombies released in 10 sec,7,1"
	}
}

;--------------------------
; NPC GUARD CHANGES
;--------------------------
; Reduces damage dealt from the npc
modify:
{
	match:
	{
        "targetname" "NPC_Guard_Hurt"
        "origin" "-12696 -9344 -7"
        "classname" "trigger_hurt"
	}
	replace:
	{
        "damagecap" "99999"
        "damage" "10"
	}
}


;--------------------------
; NPC LASER CHANGES
;--------------------------
; Reduces damage dealt from the npc
modify:
{
	match:
	{
        "targetname" "NPC_Laser_Hurt"
        "origin" "-12293.4 -9535.99 -19"
        "classname" "trigger_hurt"
	}
	replace:
	{
        "damagecap" "99999"
        "damage" "10"
	}
}
; Reduces laser distance
modify:
{
	match:
	{
        "targetname" "NPC_Laser_Move"
        "origin" "-12364 -9535.99 -19"
        "classname" "func_door"
	}
	replace:
	{
        "lip" "-2250"
	}
}


;--------------------------
; HUMAN ITEM FIXES
;--------------------------
; Downwards spiral fixes
add:
{
    "model" "*28"
    "targetname" "insta_break_staircase_trigger"
    "StartDisabled" "0"
    "spawnflags" "1"
    "filtername" "MapFilterT"
    "origin" "-15448 -13260 -332"
    "classname" "trigger_once"
    "OnStartTouch" "itemextra4human1breakable1,Break,,0,-1"
    "OnStartTouch" "!self,Kill,,0.1,-1"
}
add:
{
    "model" "*28"
    "targetname" "insta_break_staircase_trigger"
    "StartDisabled" "0"
    "spawnflags" "1"
    "filtername" "MapFilterT"
    "origin" "-15448 -13260 -140"
    "classname" "trigger_once"
    "OnStartTouch" "itemextra4human1breakable1,Break,,0,-1"
    "OnStartTouch" "!self,Kill,,0.1,-1"
}
add:
{
    "model" "*28"
    "targetname" "insta_break_staircase_trigger"
    "StartDisabled" "0"
    "spawnflags" "1"
    "filtername" "MapFilterT"
    "origin" "-15448 -13260 52"
    "classname" "trigger_once"
    "OnStartTouch" "itemextra4human1breakable1,Break,,0,-1"
    "OnStartTouch" "!self,Kill,,0.1,-1"
}
modify:
{
	match:
	{
        "origin" "-15449 -13260 -162"
        "targetname" "itemextra4humantemplate1"
        "classname" "point_template"
	}
	insert:
	{
        "Template02" "insta_break_staircase_trigger"
	}
}

; Sacrifice fixes
filter:
{
    "classname" "logic_measure_movement"
    "targetname" "item1human1measuremovement1"
}
modify:
{
    match:
    {
        "classname" "filter_multi"
        "targetname" "item1human1filter2"
    }
    delete:
    {
        "OnPass" "item1human1multiple2,Enable,,0,-1"
        "OnPass" "item1human1multiple2,Disable,,30,-1"
    }
    insert:
    {
        "OnPass" "item1human1timer1,Enable,,0,-1"
        "OnPass" "item1human1timer1,Disable,,30,-1"
    }
}
modify:
{
    match:
    {
        "classname" "trigger_multiple"
        "targetname" "item1human1multiple2"
    }
    replace:
    {
        "parentname" "item1human1weapon1"
    }
    insert:
    {
        "OnStartTouch" "item1human1equip1,Use,,,-1"
    }
}
add:
{
    "classname" "logic_timer"
    "targetname" "item1human1timer1"
    "StartDisabled" "1"
    "RefireTime" "1"
    "OnTimer" "item1human1multiple2,Enable,,,-1"
    "OnTimer" "item1human1multiple2,Disable,,.01,-1"
}
modify:
{
    match:
    {
        "classname" "game_player_equip"
        "targetname" "item1human1equip1"
    }
    replace:
    {
        "spawnflags" "1"
    }
}

;--------------------------
; ZOMBIE ITEM FIXES
;--------------------------
; LNS Fixes
modify:
{
    match:
    {
        "origin" "-12860 -13086.4 -4690.02"
        "targetname" "LNS_CUTSCENE_Knife"
        "classname" "weapon_knife"
    }
    delete:
    {
        "OnPlayerPickup" "!activator,AddOutput,rendermode 6,0,-1"
    }
}
modify:
{
    match:
    {
        "origin" "-12853.7 -13084 -4684.8"
        "targetname" "LNSTEmplate"
        "classname" "point_template"
    }
    delete:
    {
        "OnPlayerPickup" "zsmessage_human,message,Car has been picked!,0,1"
        "OnPlayerPickup" "GlobalSpeedMod,ModifySpeed,1.4,0,1"
        "OnPlayerPickup" "!activator,AddOutput,gravity 0.8,0,1"
    }
}
modify:
{
    match:
    {
        "origin" "-12861.5 -13040 -4705.02"
        "targetname" "LNS_CUTSCENE_Relay2"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "spawn_afk_teleporter,Disable,,0,1"
    }
}
modify:
{
    match:
    {
        "origin" "-12949.3 -11804 -3762"
        "targetname" "LMSTroll"
        "classname" "logic_relay"
    }
    insert:
    {
        "OnTrigger" "spawn_afk_teleporter,Enable,,35,1"
    }
}

; Dreamy Bull fixes
modify:
{
    match:
    {
        "origin" "-12386.3 -13343.9 -4690.48"
        "targetname" "BB_DreamyBull_Knife"
        "classname" "weapon_knife"
    }
    delete:
    {
        "OnPlayerPickup" "!activator,AddOutput,rendermode 6,0,-1"
    }
}

; Zombie boot soundboard fix
modify:
{
    match:
    {
        "origin" "-12860 -13342.4 -4690.02"
        "targetname" "DD_TrollSFX_Knife"
        "classname" "weapon_knife"
    }
    delete:
    {
        "OnPlayerPickup" "!activator,AddOutput,rendermode 6,0,-1"
    }
}

; Jihad John fixes
modify:
{
    match:
    {
        "origin" "-12386.3 -13103.8 -4690.48"
        "targetname" "SS_BomberGuy_Knife"
        "classname" "weapon_knife"
    }
    delete:
    {
        "OnPlayerPickup" "!activator,AddOutput,rendermode 6,0,-1"
    }
}

; Mohammed goat fixes
modify:
{
    match:
    {
        "origin" "-12767.6 -12885.5 -4728.96"
        "targetname" "WTCS_ITEM_Knife"
        "classname" "weapon_knife"
    }
    delete:
    {
        "OnPlayerPickup" "!activator,AddOutput,rendermode 6,0,-1"
    }
}