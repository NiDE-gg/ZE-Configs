;-------------------------------------------
; Fixes a music issue in the spawn intro
;-------------------------------------------
modify:
{
	match:
	{
        "classname" "trigger_multiple"
        "hammerid" "1226582"
	}
	delete:
	{
        "OnStartTouch" "spawnfx,PlaySound,,0,-1"
	}
	insert:
	{
        "OnStartTouch" "spawnfx,PlaySound,,0,1"
	}
}

;-------------------------------------------
; Fixes issues in the sewer location
;-------------------------------------------
modify:
{
	match:
	{
        "classname" "math_counter"
        "hammerid" "1061419"
	}
	delete:
	{
        "OnHitMax" "FogTrap1,Kill,,0,1"
	}
	insert:
	{
        "OnHitMax" "FogTrap1,Brak,,0,1"
	}
}
modify:
{
	match:
	{
        "targetname" "SewerDoor3"
	}
	replace:
	{
		"lip" "-4"
	}	
}

;------------------------------------------------------------
; Fixes the last push that pulls a player when winning map
;------------------------------------------------------------
modify:
{
	match:
	{
        "targetname" "lastpush"
	}
	replace:
	{
		"speed" "400"
        "origin" "-11648 15232 13496"
	}	
}

;-----------------------
; Fixes physbox issues
;-----------------------
modify:
{
	match:
	{
        "classname" "func_physbox"
        "hammerid" "1128621"
	}
	delete:
	{
        "OnBreak" "zn_Nightmare_phys,Kill,,0,1"
	}
}
modify:
{
	match:
	{
        "classname" "func_physbox"
	}
	delete:
	{
        "overridescript" "damping,2.5,rotdamping,100"
	}
}

;-------------------------------------------
; Fixes a a trigger hurt near the dragon
;-------------------------------------------
modify:
{
	match:
	{
		"targetname" "dragon_push"
	}
	replace:
	{
		"origin" "4046.25 -8091.25 4616"
	}	
}

;---------------------------
; A teleportation error
;---------------------------
modify:
{
	match:
	{
        "hammerid" "1308993"
	}
	replace:
	{
		"spawnflags" "1"
	}	
}

;---------------------------
; Sky camera fix
;---------------------------
modify:
{
	match:
	{
        "hammerid" "445435"
	}
	replace:
	{
        "fogcolor2" "26 39 45"
        "fogcolor" "63 97 111"
	}	
}

;---------------------------
; Filter targetname fixes
;---------------------------
modify:
{
	match:
	{
        "targetname" "filter_ikke_zombie"
	}
	delete:
	{
        "OnTrigger" ",,,0,-1"
	}
	insert:
	{
		"OnPass" "!activator,AddOutput,max_health 150,0,-1"
		"OnPass" "!activator,SetHealth,150,0,-1"
	}
}
modify:
{
	match:
	{
        "targetname" "filter_ikke_zombie"
	}
	delete:
	{
        "OnPass" "!activator,SetHealth,150,0,-1"
		"OnPass" "!activator,AddOutput,max_health 150,0,-1"
	}
	insert:
	{
		"OnPass" "filter_ikke_zombie,TestActivator,,0,0"
	}
}

;--------------
; ITEM FIXES
;--------------

; Lightning item
modify:
{
	match:
	{
        "targetname" "item_Lightning_Button"
	}
	insert:
	{
		"OnUser1" "item_lightning_sprite,ToggleSprite,,25,-1"
	}	
}
modify:
{
	match:
	{
        "targetname" "item_Lightning_Particle"
	}
	insert:
	{
		"parentname" "lightningFaggot"
	}
	replace:
	{
		"origin" "11608.3 -2456.38 2555"
	}
}

; Shield item
modify:
{
	match:
	{
        "targetname" "item_shield_button"
	}
	delete:
	{
        "OnPressed" "!self,FireUser1,,0,1"
        "OnUser1" "item_shield_sprite,ToggleSprite,,0,1"
        "OnPressed" "!self,Lock,,0,1"
        "OnPressed" "!self,Unlock,,25,1"
        "OnUser1" "item_shield_maker,ForceSpawn,,0,1"
        "OnUser1" "item_shield_sfx,PlaySound,,0,1"
        "OnUser1" "item_shield_sprite,ToggleSprite,,25,1"	
    }
    insert:
    {
        "OnPressed" "!self,FireUser1,,0,-1"
        "OnUser1" "item_shield_sprite,ToggleSprite,,0,-1"
        "OnPressed" "!self,Lock,,0,-1"
        "OnPressed" "!self,Unlock,,25,-1"
        "OnUser1" "item_shield_maker,ForceSpawn,,0,-1"
        "OnUser1" "item_shield_sfx,PlaySound,,0,-1"
        "OnUser1" "item_shield_sprite,ToggleSprite,,25,-1"
    }	
}
modify:
{
	match:
	{
        "targetname" "item_shield_button"
	}
	delete:
	{
		"wait" "-1"
	}
	replace:
	{
		"spawnflags" "1025"
		"wait" "0.1"
	}
}
modify:
{
	match:
	{
        "targetname" "item_shield_sfx"
	}
	replace:
	{
		"sourceentityname" "item_shield_button"
	}	
}

; Pyro item
modify:
{
	match:
	{
        "targetname" "item_pyro_button"
	}
	delete:
	{
		"wait" "-1"
	}
	replace:
	{
		"spawnflags" "1025"
		"wait" "0.1"
	}
}
modify:
{
	match:
	{
        "targetname" "item_pyro_maker"
	}
	replace:
	{
		"origin" "13826.4 9701.5 5445.21"
	}	
}
modify:
{
	match:
	{
        "targetname" "temp_fireThingy_relay"
	}
	replace:
	{
		"targetname" "temp_human_relay"
	}	
}
add:
{
	"model" "*124"
	"targetname" "temp_humanFire"
	"StartDisabled" "1"
	"spawnflags" "1"
	"origin" "10251.7 -484.44 11244"
	"nodmgforce" "0"
	"filtername" "filter_ikke_menneske"
	"damagetype" "0"
	"damagemodel" "0"
	"damagecap" "10"
	"damage" "100"
	"classname" "trigger_hurt"
	"OnStartTouch" "!activator,IgniteLifetime,2,0,-1"
}

; Heal item Estus flask
modify:
{
	match:
	{
        "targetname" "temp_ITEM_estus_button"
	}
	delete:
	{
		"wait" "-1"
	}
	replace:
	{
		"spawnflags" "1025"
		"wait" "0.1"
	}
}


;--------------------------------
; Disables flashlight on map
;--------------------------------
modify:
{
	match:
	{
        "targetname" "actualwtf"
	}
	delete:
	{
        "OnTrigger" "Verden_Konsollen_Server,Command,mp_flashlight 1,1,1"
	}
	insert:
	{
		"OnTrigger" "Verden_Konsollen_Server,Command,mp_flashlight 0,1,1"
	}
}

;-----------------
; adding torch 1
;-----------------
add:
{
	"hammerid" "999997"
	"classname" "weapon_elite"
	"ammo" "1000"
	"angles" "0 0 0"
	"spawnflags" "1"
	"targetname" "TorchWeapon_phys_1"
	"origin" "5855.57 -6574.07 4410"
}
add:
{
	"classname" "light_dynamic"
	"_cone" "60"
	"_inner_cone" "100"
	"_light" "162 70 30 100"
	"angles" "90 0 0"
	"brightness" "2"
	"distance" "500"
	"parentname" "TorchWeapon_phys_1"
	"pitch" "-90"
	"spawnflags" "2"
	"spotlight_radius" "300"
	"targetname" "TorchWeapon_Light_1"
	"origin" "5914.5 -6576 4441.19"
}
add:
{
	"classname" "prop_dynamic_override"
	"angles" "0 0 0"
	"DisableBoneFollowers" "1"
	"disablereceiveshadows" "1"
	"disableshadows" "1"
	"ExplodeDamage" "0"
	"ExplodeRadius" "0"
	"fademaxdist" "750"
	"fademindist" "555"
	"fadescale" "1"
	"health" "0"
	"MaxAnimTime" "10"
	"maxdxlevel" "0"
	"MinAnimTime" "5"
	"mindxlevel" "0"
	"model" "models/props/tools/orc/lightsrc/orc_torch/orc_torch.mdl"
	"modelscale" ".7"
	"parentname" "TorchWeapon_phys_1"
	"PerformanceMode" "0"
	"pressuredelay" "0"
	"RandomAnimation" "0"
	"renderamt" "255"
	"rendercolor" "255 255 255"
	"renderfx" "0"
	"rendermode" "0"
	"SetBodyGroup" "0"
	"skin" "0"
	"solid" "0"
	"spawnflags" "0"
	"targetname" "TorchWeapon_prop_1"
	"origin" "5912 -6575.86 4401.19"
}

;-----------------
; adding torch 2
;-----------------
add:
{
	"hammerid" "999998"
	"classname" "weapon_elite"
	"ammo" "1000"
	"angles" "0 0 0"
	"spawnflags" "1"
	"targetname" "TorchWeapon_phys_2"
	"origin" "2425.07 -7040 4606.81"
}
add:
{
	"classname" "light_dynamic"
	"_cone" "60"
	"_inner_cone" "100"
	"_light" "162 70 30 100"
	"angles" "90 0 0"
	"brightness" "2"
	"distance" "500"
	"parentname" "TorchWeapon_phys_2"
	"pitch" "-90"
	"spawnflags" "2"
	"spotlight_radius" "300"
	"targetname" "TorchWeapon_Light_2"
	"origin" "2484 -7040.14 4628"
}
add:
{
	"classname" "prop_dynamic_override"
	"angles" "0 0 0"
	"DisableBoneFollowers" "1"
	"disablereceiveshadows" "1"
	"disableshadows" "1"
	"ExplodeDamage" "0"
	"ExplodeRadius" "0"
	"fademaxdist" "750"
	"fademindist" "555"
	"fadescale" "1"
	"health" "0"
	"MaxAnimTime" "10"
	"maxdxlevel" "0"
	"MinAnimTime" "5"
	"mindxlevel" "0"
	"model" "models/props/tools/orc/lightsrc/orc_torch/orc_torch.mdl"
	"modelscale" ".7"
	"parentname" "TorchWeapon_phys_2"
	"PerformanceMode" "0"
	"pressuredelay" "0"
	"RandomAnimation" "0"
	"renderamt" "255"
	"rendercolor" "255 255 255"
	"renderfx" "0"
	"rendermode" "0"
	"SetBodyGroup" "0"
	"skin" "0"
	"solid" "0"
	"spawnflags" "0"
	"targetname" "TorchWeapon_prop_2"
	"origin" "2481.5 -7040 4588"
}

;-----------------
; adding torch 3
;-----------------
add:
{
	"hammerid" "999999"
	"classname" "weapon_elite"
	"ammo" "1000"
	"angles" "0 0 0"
	"spawnflags" "1"
	"targetname" "TorchWeapon_phys_3"
	"origin" "13780 9858.69 5442.74"
}
add:
{
	"classname" "light_dynamic"
	"_cone" "60"
	"_inner_cone" "100"
	"_light" "162 70 30 100"
	"angles" "90 0 0"
	"brightness" "2"
	"distance" "500"
	"parentname" "TorchWeapon_phys_3"
	"pitch" "-90"
	"spawnflags" "2"
	"spotlight_radius" "300"
	"targetname" "TorchWeapon_Light_3"
	"origin" "13838.9 9855.86 5456"
}
add:
{
	"classname" "prop_dynamic_override"
	"angles" "0 0 0"
	"DisableBoneFollowers" "1"
	"disablereceiveshadows" "1"
	"disableshadows" "1"
	"ExplodeDamage" "0"
	"ExplodeRadius" "0"
	"fademaxdist" "750"
	"fademindist" "555"
	"fadescale" "1"
	"health" "0"
	"MaxAnimTime" "10"
	"maxdxlevel" "0"
	"MinAnimTime" "5"
	"mindxlevel" "0"
	"model" "models/props/tools/orc/lightsrc/orc_torch/orc_torch.mdl"
	"modelscale" ".7"
	"parentname" "TorchWeapon_phys_3"
	"PerformanceMode" "0"
	"pressuredelay" "0"
	"RandomAnimation" "0"
	"renderamt" "255"
	"rendercolor" "255 255 255"
	"renderfx" "0"
	"rendermode" "0"
	"SetBodyGroup" "0"
	"skin" "0"
	"solid" "0"
	"spawnflags" "0"
	"targetname" "TorchWeapon_prop_3"
	"origin" "13836.4 9856 5416"
}