;------------------------------------------------
; Fix cameras can lead to unexpected map behavior
;------------------------------------------------
modify:
{
	match:
	{
		"classname" "point_viewcontrol"
	}
	replace:
	{
		"spawnflags" "28"
	}
}

;------------------------------------------------
; Disable abyss on elevator s2
;------------------------------------------------
modify:
{
	match:
	{
		"targetname" "s2door_12_3"
		"origin" "5309 3208 -10426"
		"classname" "trigger_once"
	}
	insert:
	{
		"OnStartTouch" "abyss_branch,SetValue,0,20,1"
		"OnStartTouch" "command,Command,sm_ewlockbutton 5232265 1,20,1"
	}
}
modify:
{
	match:
	{
		"targetname" "s2door_12_1"
		"origin" "5309 3208 -8730"
		"classname" "func_movelinear"
	}
	insert:
	{
		"OnFullyOpen" "abyss_branch,SetValue,1,5,1"
		"OnFullyOpen" "command,Command,sm_ewlockbutton 5232265 0,5,1"
	}
}

;------------------------------------------------
; Kill tornados after dragon boss dies
;------------------------------------------------
modify:
{
	match:
	{
		"targetname" "bossdeath2"
		"origin" "1536 -14096 -1671"
		"classname" "logic_case"
	}
	insert:
	{
		"OnCase03" "s3_boss_atk_tornado_temp,Kill,,0,1"
		"OnCase03" "s3boss_atk_tornado_hurt,Kill,,0,1"
		"OnCase03" "s3boss_atk_tornado_hurt,Kill,,1,1"
		"OnCase03" "s3boss_atk_tornado_hurt,Kill,,2,1"
		"OnCase03" "s3boss_atk_tornado_hurt,Kill,,3,1"
	}
}

;------------------------------------------------
; Buff serpent boss
;------------------------------------------------
modify:
{
	match:
	{
		"targetname" "s3_snake_add"
		"origin" "2456.1 12959.5 -1537"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnStartTouch" "snake_math,Add,4,0,-1"
		"OnStartTouch" "Boss_Health_snake,Add,4,0,-1"
		"OnStartTouch" "Boss_HealthBackup_snake,Add,4,0,-1"
	}
	insert:
	{
		"OnStartTouch" "snake_math,Add,25,0,-1"
		"OnStartTouch" "Boss_Health_snake,Add,25,0,-1"
		"OnStartTouch" "Boss_HealthBackup_snake,Add,25,0,-1"
	}
}

;------------------------------------------------
; Nerf troll boss
;------------------------------------------------
modify:
{
	match:
	{
		"targetname" "s2boss_hurt1"
		"origin" "8782 3210 -13510"
		"classname" "trigger_hurt"
	}
	replace:
	{
		"damage" "175"
	}
}
modify:
{
	match:
	{
		"targetname" "s2boss_atk_hurt"
		"origin" "8294 3120 -13153"
		"classname" "trigger_hurt"
	}
	replace:
	{
		"damage" "100"
	}
}

;------------------------------------------------
; Nerf diablo boss
;------------------------------------------------
modify:
{
	match:
	{
		"targetname" "s5boss_atkcase"
		"origin" "13616 -2223 6964"
		"classname" "logic_case"
	}
	delete:
	{
		"OnCase06" "s5_boss_atk_tornado_temp,AddOutput,origin 14258 -1422 7052,1,-1"
		"OnCase06" "s5_boss_atk_tornado_temp,ForceSpawn,,2.1,-1"
		"OnCase06" "s5_boss_atk_tornado_temp,AddOutput,origin 12979 -2725 7052,2,-1"
		"OnCase06" "s5_boss_atk_tornado_temp,ForceSpawn,,3.1,-1"
		"OnCase06" "s5_boss_atk_tornado_temp,AddOutput,origin 12956 -1418 7052,3,-1"
	}
}

;------------------------------------------------
; Add stripper message
;------------------------------------------------
modify:
{
	match:
	{
		"origin" "1616 -13056 -1671"
		"classname" "logic_auto"
	}
	insert:
	{
		"OnMapSpawn" "command,Command,say < STRIPPER 3 LOADED 30/8/2024 >,1,-1"
	}
}

;------------------------------------------------
; Delay shortcut for zm on s2
;------------------------------------------------
modify:
{
	match:
	{
		"targetname" "s2door_6_2"
		"origin" "9217 -4312 -9848"
		"classname" "trigger_once"
	}
	delete:
	{
		"OnStartTouch" "s2door_6_1_shortcut,Break,,20,1"
		"OnStartTouch" "s2door_6_1_shortcut_tp,Enable,,20,1"
	}
	insert:
	{
		"OnStartTouch" "s2door_6_1_shortcut,Break,,35,1"
		"OnStartTouch" "s2door_6_1_shortcut_tp,Enable,,35,1"
	}
}

;------------------------------------------------
; Kill tornado faster to avoid being pushed into beam attack
;------------------------------------------------
modify:
{
	match:
	{
		"targetname" "s5boss_atk_tornado_relay"
		"origin" "14357 -2880 8103"
		"classname" "logic_relay"
	}
	delete:
	{
		"OnSpawn" "s5boss_atk_tornado_phy,Kill,,26.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster1,Kill,,26.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster2,Kill,,26.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster_up,Kill,,26.5,-1"
		"OnSpawn" "s5boss_atk_tornado_up,Kill,,26.5,-1"
		"OnSpawn" "!self,Kill,,26.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster_case,Kill,,26.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster_timer,Kill,,26.5,-1"
		"OnSpawn" "s5boss_atk_tornado_eff,Kill,,26.5,-1"
		"OnSpawn" "s5boss_atk_tornado_hurt,Kill,,26.5,-1"
	}
	insert:
	{
		"OnSpawn" "s5boss_atk_tornado_phy,Kill,,20.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster1,Kill,,20.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster2,Kill,,20.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster_up,Kill,,20.5,-1"
		"OnSpawn" "s5boss_atk_tornado_up,Kill,,20.5,-1"
		"OnSpawn" "!self,Kill,,20.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster_case,Kill,,20.5,-1"
		"OnSpawn" "s5boss_atk_tornado_thruster_timer,Kill,,20.5,-1"
		"OnSpawn" "s5boss_atk_tornado_eff,Kill,,20.5,-1"
		"OnSpawn" "s5boss_atk_tornado_hurt,Kill,,20.5,-1"
	}
}